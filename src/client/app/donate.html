<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Donate</title>
    <link rel="stylesheet" href="./styles.css">
    <link rel="stylesheet" href="./styles-david.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />

    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://checkout.stripe.com/checkout.js"></script>
  </head>
  <body class="donate">
    <form id="form">
      <button type="submit" id="customButton">Donate</button>
      <script>

      // data-image="images/button.png"

      var handler = StripeCheckout.configure({
        key: 'pk_test_CRMdrE0VHQluAFOoUltiyYb6',
        image: "https://scontent.xx.fbcdn.net/v/t1.0-1/c43.43.538.538/s320x320/216134_339959052763134_2145748467_n.jpg?oh=d55b4594e29ff41461e005dc841f0f86&oe=59582226",
        locale: 'auto',
        billingAddress: false,
        token: function(token) {
          // You can access the token ID with `token.id`.
          // Get the token ID to your server-side code for use.
          $.ajax({
            url: '/checkout',
            method: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(token),
            success: function() {
              console.log('success in POST request in donate.html', token);
            },
            error: function(err) {
              console.error('error in POST request in donate.html', token);
            }
          });
        }
      });

      document.getElementById('customButton').addEventListener('click', function(e) {
        // Open Checkout with further options:
        handler.open({
          name: 'youIn',
          description: null,
          amount: 500,
        });
        e.preventDefault();
      });

      // Close Checkout on page navigation:
      window.addEventListener('popstate', function() {
        handler.close();
      });
      </script>
    </form>
  </body>
</html>
